---
- alias: Zone Alerts - Steph
  trigger:
    - platform: state
      entity_id: person.steph

  condition:
    - condition: template
      value_template: '{{ trigger.from_state.state != trigger.to_state.state }}'

  action:
    - choose:
        conditions:
          - condition: template
            value_template: "{{ trigger.from_state.state != 'not_home' }}"
        sequence:
          - service: notify.bertie_iphone
            data:
              message: >
                {% if trigger.entity_id == 'person.steph' %}
                  👱🏻‍♀️ Steph left {{ trigger.from_state.state }}
                {% else %}
                  🧔 Bertie left {{ trigger.from_state.state }}
                {% endif %}

      default:
        - service: notify.bertie_iphone
          data:
            message: 👱🏻‍♀️ Steph arrived at '{{ trigger.to_state.state }}'
